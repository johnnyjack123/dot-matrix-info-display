<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8"/>
    <title>Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <link href="/static/style.css" rel="stylesheet">
</head>
<body>
{% include 'navbar.html' %}
<h1 class="header">Settings</h1>
<div class="form-container-settings-wrapper">

    <div class="form-settings-container">
        <form method="POST" action="/settings">
            <label for="username" class="form-label">Change your username</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Change your username"/>

            <label for="ip" class="form-label">ESP IP Address</label>
            <input type="text" class="form-control" id="ip" name="ip" placeholder="Change the IP of your ESP"/>

            <label for="weather_api_key" class="form-label">Weather API Key</label>
            <input type="text" class="form-control" id="weather_api_key" name="weather_api_key"
                   placeholder="Enter your API Key"/>

            <label for="city" class="form-label">Your City</label>
            <input type="text" class="form-control" id="city" name="city" placeholder="Enter your city"/>

            <p class="form-label">Launch in app window, otherwise it will start only in the browser (changes become active after a
                    restart)</p>
                <div>
                    <label class="switch">
                        <input type="checkbox" id="switch" name="switch" {% if switch_state %}checked{%
                       endif %}>
                        <span class="slider"></span>
                    </label>
                </div>

            <button type="submit" class="btn btn-glass">Save Settings</button>
        </form>
        <a href="/manage_threads" class="btn btn-outline-light">Manage Threads</a>
        <a href="/dashboard" class="btn btn-outline-light">Back to Dashboard</a>
        <p class="form-label" style="margin-top: 10px">{{ version }}</p>
    </div>

</div>
<script>
    // navbar hover effect
document.addEventListener("DOMContentLoaded", () => {
  const menu = document.querySelector('.menu-bar');
  const items = document.querySelectorAll('.menu-bar li');
  const hoverBg = document.querySelector('.hover-bg');

  items.forEach(item => {
    item.addEventListener('mouseenter', () => {
      const rect = item.getBoundingClientRect();
      const parentRect = menu.getBoundingClientRect();

      hoverBg.style.width = `${rect.width}px`;
      hoverBg.style.left = `${rect.left - parentRect.left}px`;
      hoverBg.style.opacity = '1';
      hoverBg.style.transform = 'scale(1.08)';
    });

    item.addEventListener('mouseleave', () => {
      hoverBg.style.transform = 'scale(1)';
    });
  });

  menu.addEventListener('mouseleave', () => {
    hoverBg.style.opacity = '0';
    hoverBg.style.transform = 'scale(1)';
  });
});
</script>
</body>
</html>
